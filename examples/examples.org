* Cluster examples
** Au5
#+BEGIN_SRC python :results output org drawer
from structopt.utilities.optimizer import StructOpt
from structopt.utilities.exceptions import *

parameters = {
    "seed": 0,
    "logging": { },
    "structure_type": "cluster",
    "generators": {
	"sphere": {"number_of_individuals": 20,
		   "kwargs": {"atomlist": [["Au", 5]],
			      "cell": [10, 10, 10],
			      "fill_factor": 0.4}}
    },
    "fitnesses": {
        "LAMMPS": {"weight": 1.0,
	           "kwargs": {"use_mpi4py": False,
	                      "MPMD": 0,
	                      "keep_files": False,
	                      "min_style": "cg",
                              "min_modify": "line quadratic",
	                      "minimize": "1e-8 1e-8 5000 10000",
	                      "pair_style": "eam",
	                      "potential_file": "$STRUCTOPT_HOME/potentials/Au_u3.eam",
	                      "thermo_steps": 0}}
    },
    "relaxations": {
        "LAMMPS": {"order": 0,
                   "kwargs": {"use_mpi4py": False,
	                      "MPMD": 0,
	                      "keep_files": False,
	                      "min_style": "cg",
                              "min_modify": "line quadratic",
	                      "minimize": "1e-8 1e-8 5000 10000",
	                      "pair_style": "eam",
	                      "potential_file": "$STRUCTOPT_HOME/potentials/Au_u3.eam",
	                      "thermo_steps": 0}}
    },
    "convergence": {
        "max_generations": 5
    },
    "mutations": {
	"move_atoms": {"probability": 0.0},
	"swap_positions": {"probability": 0.0},
	"swap_species": {"probability": 0.0},
	"rotate_atoms": {"probability": 0.0},
	"rotate_cluster": {"probability": 0.3},
        "rotate_all": {"probability": 0.7}
    },
    "fingerprinters": {
        "options": []
    },
    "crossovers": {
        "rotate": {"probability": 1.0}
    },
    "predators": {
        "best": {"probability": 1.0}
    },
    "selections": {
        "rank": {"probability": 1.0,
                 "kwargs": {"unique_pairs": False,
                            "unique_parents": False}},
        "random_selection": {"probability": 0.0}
    },
    "fileio": {},
    "postprocessing": {},
    "tools": {}
}

submit = {'job_name': 'Au5-with-optimizer',
          'system': 'PBS',
          'queue': 'morgan2',
          'nodes': 1,
          'cores': 1,
          'walltime': 2}

optimizer = StructOpt('cluster/Au5-with-optimizer', 'genetic', parameters, submit)
try:
    optimizer.optimize(rerun=True)
except StructOptSubmitted:
    print(optimizer.calcdir, 'running')
print(optimizer.get_all_populations())
#+END_SRC

#+RESULTS:
:RESULTS:
cluster/Au5-with-optimizer running
[[<Individual 0>, <Individual 1>, <Individual 2>, <Individual 3>, <Individual 4>, <Individual 5>, <Individual 6>, <Individual 7>, <Individual 8>, <Individual 9>, <Individual 10>, <Individual 11>, <Individual 12>, <Individual 13>, <Individual 14>, <Individual 15>, <Individual 16>, <Individual 17>, <Individual 18>, <Individual 19>], [<Individual 0>, <Individual 1>, <Individual 2>, <Individual 3>, <Individual 4>, <Individual 5>, <Individual 6>, <Individual 7>, <Individual 8>, <Individual 9>, <Individual 10>, <Individual 11>, <Individual 12>, <Individual 13>, <Individual 14>, <Individual 15>, <Individual 16>, <Individual 17>, <Individual 18>, <Individual 19>], [<Individual 0>, <Individual 1>, <Individual 2>, <Individual 3>, <Individual 4>, <Individual 5>, <Individual 6>, <Individual 7>, <Individual 8>, <Individual 9>, <Individual 10>, <Individual 11>, <Individual 12>, <Individual 13>, <Individual 14>, <Individual 15>, <Individual 16>, <Individual 17>, <Individual 18>, <Individual 19>], [<Individual 0>, <Individual 1>, <Individual 2>, <Individual 3>, <Individual 4>, <Individual 5>, <Individual 6>, <Individual 7>, <Individual 8>, <Individual 9>, <Individual 10>, <Individual 11>, <Individual 12>, <Individual 13>, <Individual 14>, <Individual 15>, <Individual 16>, <Individual 17>, <Individual 18>, <Individual 19>], [<Individual 0>, <Individual 1>, <Individual 2>, <Individual 3>, <Individual 4>, <Individual 5>, <Individual 6>, <Individual 7>, <Individual 8>, <Individual 9>, <Individual 10>, <Individual 11>, <Individual 12>, <Individual 13>, <Individual 14>, <Individual 15>, <Individual 16>, <Individual 17>, <Individual 18>, <Individual 19>], [<Individual 0>, <Individual 1>, <Individual 2>, <Individual 3>, <Individual 4>, <Individual 5>, <Individual 6>, <Individual 7>, <Individual 8>, <Individual 9>, <Individual 10>, <Individual 11>, <Individual 12>, <Individual 13>, <Individual 14>, <Individual 15>, <Individual 16>, <Individual 17>, <Individual 18>, <Individual 19>]]
:END:

* Crystal examples
